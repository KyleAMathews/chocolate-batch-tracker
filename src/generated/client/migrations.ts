export default [
  {
    "statements": [
      "CREATE TABLE \"chocolate_batch\" (\n  \"batch_id\" TEXT NOT NULL,\n  \"recipe_id\" TEXT,\n  \"bean_origin\" TEXT NOT NULL,\n  \"importer\" TEXT NOT NULL,\n  \"production_date\" TEXT NOT NULL,\n  CONSTRAINT \"chocolate_batch_recipe_id_fkey\" FOREIGN KEY (\"recipe_id\") REFERENCES \"recipes\" (\"recipe_id\"),\n  CONSTRAINT \"chocolate_batch_pkey\" PRIMARY KEY (\"batch_id\")\n) WITHOUT ROWID;\n",
      "CREATE TABLE \"production_comments\" (\n  \"comment_id\" TEXT NOT NULL,\n  \"batch_id\" TEXT,\n  \"user_name\" TEXT NOT NULL,\n  \"comment_timestamp\" TEXT,\n  \"comment_text\" TEXT NOT NULL,\n  \"attachment_path\" TEXT,\n  CONSTRAINT \"production_comments_batch_id_fkey\" FOREIGN KEY (\"batch_id\") REFERENCES \"chocolate_batch\" (\"batch_id\"),\n  CONSTRAINT \"production_comments_pkey\" PRIMARY KEY (\"comment_id\")\n) WITHOUT ROWID;\n",
      "CREATE TABLE \"recipes\" (\n  \"recipe_id\" TEXT NOT NULL,\n  \"recipe_name\" TEXT NOT NULL,\n  CONSTRAINT \"recipes_pkey\" PRIMARY KEY (\"recipe_id\")\n) WITHOUT ROWID;\n",
      "CREATE TABLE \"recipe_ingredients\" (\n  \"ingredient_id\" TEXT NOT NULL,\n  \"recipe_id\" TEXT,\n  \"ingredient_name\" TEXT NOT NULL,\n  \"percentage\" INTEGER NOT NULL,\n  CONSTRAINT \"recipe_ingredients_percentage_check\" CHECK (((\"percentage\" > 0) AND (\"percentage\" <= 100))),\n  CONSTRAINT \"recipe_ingredients_recipe_id_fkey\" FOREIGN KEY (\"recipe_id\") REFERENCES \"recipes\" (\"recipe_id\"),\n  CONSTRAINT \"recipe_ingredients_pkey\" PRIMARY KEY (\"ingredient_id\")\n) WITHOUT ROWID;\n",
      "-- Toggles for turning the triggers on and off\nINSERT OR IGNORE INTO _electric_trigger_settings(tablename,flag) VALUES ('main.chocolate_batch', 1);",
      "  /* Triggers for table chocolate_batch */\n\n  -- ensures primary key is immutable\n  DROP TRIGGER IF EXISTS update_ensure_main_chocolate_batch_primarykey;",
      "CREATE TRIGGER update_ensure_main_chocolate_batch_primarykey\n  BEFORE UPDATE ON \"main\".\"chocolate_batch\"\nBEGIN\n  SELECT\n    CASE\n      WHEN old.\"batch_id\" != new.\"batch_id\" THEN\n      \t\tRAISE (ABORT, 'cannot change the value of column batch_id as it belongs to the primary key')\n    END;\nEND;",
      "-- Triggers that add INSERT, UPDATE, DELETE operation to the _opslog table\nDROP TRIGGER IF EXISTS insert_main_chocolate_batch_into_oplog;",
      "CREATE TRIGGER insert_main_chocolate_batch_into_oplog\n   AFTER INSERT ON \"main\".\"chocolate_batch\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.chocolate_batch')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'chocolate_batch', 'INSERT', json_object('batch_id', new.\"batch_id\"), json_object('batch_id', new.\"batch_id\", 'bean_origin', new.\"bean_origin\", 'importer', new.\"importer\", 'production_date', new.\"production_date\", 'recipe_id', new.\"recipe_id\"), NULL, NULL);\nEND;",
      "DROP TRIGGER IF EXISTS update_main_chocolate_batch_into_oplog;",
      "CREATE TRIGGER update_main_chocolate_batch_into_oplog\n   AFTER UPDATE ON \"main\".\"chocolate_batch\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.chocolate_batch')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'chocolate_batch', 'UPDATE', json_object('batch_id', new.\"batch_id\"), json_object('batch_id', new.\"batch_id\", 'bean_origin', new.\"bean_origin\", 'importer', new.\"importer\", 'production_date', new.\"production_date\", 'recipe_id', new.\"recipe_id\"), json_object('batch_id', old.\"batch_id\", 'bean_origin', old.\"bean_origin\", 'importer', old.\"importer\", 'production_date', old.\"production_date\", 'recipe_id', old.\"recipe_id\"), NULL);\nEND;",
      "DROP TRIGGER IF EXISTS delete_main_chocolate_batch_into_oplog;",
      "CREATE TRIGGER delete_main_chocolate_batch_into_oplog\n   AFTER DELETE ON \"main\".\"chocolate_batch\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.chocolate_batch')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'chocolate_batch', 'DELETE', json_object('batch_id', old.\"batch_id\"), NULL, json_object('batch_id', old.\"batch_id\", 'bean_origin', old.\"bean_origin\", 'importer', old.\"importer\", 'production_date', old.\"production_date\", 'recipe_id', old.\"recipe_id\"), NULL);\nEND;",
      "-- Triggers for foreign key compensations\nDROP TRIGGER IF EXISTS compensation_insert_main_chocolate_batch_recipe_id_into_oplog;",
      "CREATE TRIGGER compensation_insert_main_chocolate_batch_recipe_id_into_oplog\n  AFTER INSERT ON \"main\".\"chocolate_batch\"\n  WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes') AND\n       1 == (SELECT value from _electric_meta WHERE key == 'compensations')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  SELECT 'main', 'recipes', 'COMPENSATION', json_object('recipe_id', \"recipe_id\"), json_object('recipe_id', \"recipe_id\"), NULL, NULL\n  FROM \"main\".\"recipes\" WHERE \"recipe_id\" = new.\"recipe_id\";\nEND;",
      "DROP TRIGGER IF EXISTS compensation_update_main_chocolate_batch_recipe_id_into_oplog;",
      "CREATE TRIGGER compensation_update_main_chocolate_batch_recipe_id_into_oplog\n   AFTER UPDATE ON \"main\".\"chocolate_batch\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes') AND\n        1 == (SELECT value from _electric_meta WHERE key == 'compensations')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  SELECT 'main', 'recipes', 'COMPENSATION', json_object('recipe_id', \"recipe_id\"), json_object('recipe_id', \"recipe_id\"), NULL, NULL\n  FROM \"main\".\"recipes\" WHERE \"recipe_id\" = new.\"recipe_id\";\nEND;",
      "-- Toggles for turning the triggers on and off\nINSERT OR IGNORE INTO _electric_trigger_settings(tablename,flag) VALUES ('main.production_comments', 1);",
      "  /* Triggers for table production_comments */\n\n  -- ensures primary key is immutable\n  DROP TRIGGER IF EXISTS update_ensure_main_production_comments_primarykey;",
      "CREATE TRIGGER update_ensure_main_production_comments_primarykey\n  BEFORE UPDATE ON \"main\".\"production_comments\"\nBEGIN\n  SELECT\n    CASE\n      WHEN old.\"comment_id\" != new.\"comment_id\" THEN\n      \t\tRAISE (ABORT, 'cannot change the value of column comment_id as it belongs to the primary key')\n    END;\nEND;",
      "-- Triggers that add INSERT, UPDATE, DELETE operation to the _opslog table\nDROP TRIGGER IF EXISTS insert_main_production_comments_into_oplog;",
      "CREATE TRIGGER insert_main_production_comments_into_oplog\n   AFTER INSERT ON \"main\".\"production_comments\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.production_comments')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'production_comments', 'INSERT', json_object('comment_id', new.\"comment_id\"), json_object('attachment_path', new.\"attachment_path\", 'batch_id', new.\"batch_id\", 'comment_id', new.\"comment_id\", 'comment_text', new.\"comment_text\", 'comment_timestamp', new.\"comment_timestamp\", 'user_name', new.\"user_name\"), NULL, NULL);\nEND;",
      "DROP TRIGGER IF EXISTS update_main_production_comments_into_oplog;",
      "CREATE TRIGGER update_main_production_comments_into_oplog\n   AFTER UPDATE ON \"main\".\"production_comments\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.production_comments')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'production_comments', 'UPDATE', json_object('comment_id', new.\"comment_id\"), json_object('attachment_path', new.\"attachment_path\", 'batch_id', new.\"batch_id\", 'comment_id', new.\"comment_id\", 'comment_text', new.\"comment_text\", 'comment_timestamp', new.\"comment_timestamp\", 'user_name', new.\"user_name\"), json_object('attachment_path', old.\"attachment_path\", 'batch_id', old.\"batch_id\", 'comment_id', old.\"comment_id\", 'comment_text', old.\"comment_text\", 'comment_timestamp', old.\"comment_timestamp\", 'user_name', old.\"user_name\"), NULL);\nEND;",
      "DROP TRIGGER IF EXISTS delete_main_production_comments_into_oplog;",
      "CREATE TRIGGER delete_main_production_comments_into_oplog\n   AFTER DELETE ON \"main\".\"production_comments\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.production_comments')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'production_comments', 'DELETE', json_object('comment_id', old.\"comment_id\"), NULL, json_object('attachment_path', old.\"attachment_path\", 'batch_id', old.\"batch_id\", 'comment_id', old.\"comment_id\", 'comment_text', old.\"comment_text\", 'comment_timestamp', old.\"comment_timestamp\", 'user_name', old.\"user_name\"), NULL);\nEND;",
      "-- Triggers for foreign key compensations\nDROP TRIGGER IF EXISTS compensation_insert_main_production_comments_batch_id_into_oplog;",
      "CREATE TRIGGER compensation_insert_main_production_comments_batch_id_into_oplog\n  AFTER INSERT ON \"main\".\"production_comments\"\n  WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.chocolate_batch') AND\n       1 == (SELECT value from _electric_meta WHERE key == 'compensations')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  SELECT 'main', 'chocolate_batch', 'COMPENSATION', json_object('batch_id', \"batch_id\"), json_object('batch_id', \"batch_id\"), NULL, NULL\n  FROM \"main\".\"chocolate_batch\" WHERE \"batch_id\" = new.\"batch_id\";\nEND;",
      "DROP TRIGGER IF EXISTS compensation_update_main_production_comments_batch_id_into_oplog;",
      "CREATE TRIGGER compensation_update_main_production_comments_batch_id_into_oplog\n   AFTER UPDATE ON \"main\".\"production_comments\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.chocolate_batch') AND\n        1 == (SELECT value from _electric_meta WHERE key == 'compensations')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  SELECT 'main', 'chocolate_batch', 'COMPENSATION', json_object('batch_id', \"batch_id\"), json_object('batch_id', \"batch_id\"), NULL, NULL\n  FROM \"main\".\"chocolate_batch\" WHERE \"batch_id\" = new.\"batch_id\";\nEND;",
      "-- Toggles for turning the triggers on and off\nINSERT OR IGNORE INTO _electric_trigger_settings(tablename,flag) VALUES ('main.recipes', 1);",
      "  /* Triggers for table recipes */\n\n  -- ensures primary key is immutable\n  DROP TRIGGER IF EXISTS update_ensure_main_recipes_primarykey;",
      "CREATE TRIGGER update_ensure_main_recipes_primarykey\n  BEFORE UPDATE ON \"main\".\"recipes\"\nBEGIN\n  SELECT\n    CASE\n      WHEN old.\"recipe_id\" != new.\"recipe_id\" THEN\n      \t\tRAISE (ABORT, 'cannot change the value of column recipe_id as it belongs to the primary key')\n    END;\nEND;",
      "-- Triggers that add INSERT, UPDATE, DELETE operation to the _opslog table\nDROP TRIGGER IF EXISTS insert_main_recipes_into_oplog;",
      "CREATE TRIGGER insert_main_recipes_into_oplog\n   AFTER INSERT ON \"main\".\"recipes\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'recipes', 'INSERT', json_object('recipe_id', new.\"recipe_id\"), json_object('recipe_id', new.\"recipe_id\", 'recipe_name', new.\"recipe_name\"), NULL, NULL);\nEND;",
      "DROP TRIGGER IF EXISTS update_main_recipes_into_oplog;",
      "CREATE TRIGGER update_main_recipes_into_oplog\n   AFTER UPDATE ON \"main\".\"recipes\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'recipes', 'UPDATE', json_object('recipe_id', new.\"recipe_id\"), json_object('recipe_id', new.\"recipe_id\", 'recipe_name', new.\"recipe_name\"), json_object('recipe_id', old.\"recipe_id\", 'recipe_name', old.\"recipe_name\"), NULL);\nEND;",
      "DROP TRIGGER IF EXISTS delete_main_recipes_into_oplog;",
      "CREATE TRIGGER delete_main_recipes_into_oplog\n   AFTER DELETE ON \"main\".\"recipes\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'recipes', 'DELETE', json_object('recipe_id', old.\"recipe_id\"), NULL, json_object('recipe_id', old.\"recipe_id\", 'recipe_name', old.\"recipe_name\"), NULL);\nEND;",
      "-- Toggles for turning the triggers on and off\nINSERT OR IGNORE INTO _electric_trigger_settings(tablename,flag) VALUES ('main.recipe_ingredients', 1);",
      "  /* Triggers for table recipe_ingredients */\n\n  -- ensures primary key is immutable\n  DROP TRIGGER IF EXISTS update_ensure_main_recipe_ingredients_primarykey;",
      "CREATE TRIGGER update_ensure_main_recipe_ingredients_primarykey\n  BEFORE UPDATE ON \"main\".\"recipe_ingredients\"\nBEGIN\n  SELECT\n    CASE\n      WHEN old.\"ingredient_id\" != new.\"ingredient_id\" THEN\n      \t\tRAISE (ABORT, 'cannot change the value of column ingredient_id as it belongs to the primary key')\n    END;\nEND;",
      "-- Triggers that add INSERT, UPDATE, DELETE operation to the _opslog table\nDROP TRIGGER IF EXISTS insert_main_recipe_ingredients_into_oplog;",
      "CREATE TRIGGER insert_main_recipe_ingredients_into_oplog\n   AFTER INSERT ON \"main\".\"recipe_ingredients\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipe_ingredients')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'recipe_ingredients', 'INSERT', json_object('ingredient_id', new.\"ingredient_id\"), json_object('ingredient_id', new.\"ingredient_id\", 'ingredient_name', new.\"ingredient_name\", 'percentage', new.\"percentage\", 'recipe_id', new.\"recipe_id\"), NULL, NULL);\nEND;",
      "DROP TRIGGER IF EXISTS update_main_recipe_ingredients_into_oplog;",
      "CREATE TRIGGER update_main_recipe_ingredients_into_oplog\n   AFTER UPDATE ON \"main\".\"recipe_ingredients\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipe_ingredients')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'recipe_ingredients', 'UPDATE', json_object('ingredient_id', new.\"ingredient_id\"), json_object('ingredient_id', new.\"ingredient_id\", 'ingredient_name', new.\"ingredient_name\", 'percentage', new.\"percentage\", 'recipe_id', new.\"recipe_id\"), json_object('ingredient_id', old.\"ingredient_id\", 'ingredient_name', old.\"ingredient_name\", 'percentage', old.\"percentage\", 'recipe_id', old.\"recipe_id\"), NULL);\nEND;",
      "DROP TRIGGER IF EXISTS delete_main_recipe_ingredients_into_oplog;",
      "CREATE TRIGGER delete_main_recipe_ingredients_into_oplog\n   AFTER DELETE ON \"main\".\"recipe_ingredients\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipe_ingredients')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  VALUES ('main', 'recipe_ingredients', 'DELETE', json_object('ingredient_id', old.\"ingredient_id\"), NULL, json_object('ingredient_id', old.\"ingredient_id\", 'ingredient_name', old.\"ingredient_name\", 'percentage', old.\"percentage\", 'recipe_id', old.\"recipe_id\"), NULL);\nEND;",
      "-- Triggers for foreign key compensations\nDROP TRIGGER IF EXISTS compensation_insert_main_recipe_ingredients_recipe_id_into_oplog;",
      "CREATE TRIGGER compensation_insert_main_recipe_ingredients_recipe_id_into_oplog\n  AFTER INSERT ON \"main\".\"recipe_ingredients\"\n  WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes') AND\n       1 == (SELECT value from _electric_meta WHERE key == 'compensations')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  SELECT 'main', 'recipes', 'COMPENSATION', json_object('recipe_id', \"recipe_id\"), json_object('recipe_id', \"recipe_id\"), NULL, NULL\n  FROM \"main\".\"recipes\" WHERE \"recipe_id\" = new.\"recipe_id\";\nEND;",
      "DROP TRIGGER IF EXISTS compensation_update_main_recipe_ingredients_recipe_id_into_oplog;",
      "CREATE TRIGGER compensation_update_main_recipe_ingredients_recipe_id_into_oplog\n   AFTER UPDATE ON \"main\".\"recipe_ingredients\"\n   WHEN 1 == (SELECT flag from _electric_trigger_settings WHERE tablename == 'main.recipes') AND\n        1 == (SELECT value from _electric_meta WHERE key == 'compensations')\nBEGIN\n  INSERT INTO _electric_oplog (namespace, tablename, optype, primaryKey, newRow, oldRow, timestamp)\n  SELECT 'main', 'recipes', 'COMPENSATION', json_object('recipe_id', \"recipe_id\"), json_object('recipe_id', \"recipe_id\"), NULL, NULL\n  FROM \"main\".\"recipes\" WHERE \"recipe_id\" = new.\"recipe_id\";\nEND;"
    ],
    "version": "1"
  }
]